# 常见问题与排障

本页按“现象 -> 原因 -> 排查动作”组织，优先给出可执行步骤。

## 1) 增加模型后仍不可见

**常见原因**

- 修改了错误的插件版本目录
- 选择了非实际生效的 `index-*.js`
- VS Code/插件未重启
- 仅增强规则未更新（已提示 warning）

**排查动作**

1. 重新执行「扫描插件」，确认当前使用版本
2. 重新选择 index 文件并执行「备份并增加模型」
3. 完全退出并重启 VS Code
4. 必要时点击「恢复默认设置」后重新应用

## 2) VS Code 启动后未自动打开侧栏

**常见原因**

- 当前 `code` CLI 不支持 `--command`
- 插件命令在当前版本不可用

**排查动作**

- 先确认 VS Code 能正常打开工作区
- 若仅未自动打开侧栏，属于可回退场景，不影响基本可用
- 可再次尝试“会话继续（VS Code）”验证 URI/命令路径

## 3) 接口检测显示 HTTP 200 但仍失败

**解释**

该工具采用“状态码 + 响应结构”双重判定；200 只是网络成功，不代表业务响应有效。

**排查动作**

- 查看诊断详情中的失败原因（字段缺失/结构不合法/错误对象）
- 对比同账号在目标客户端中的实际可用性
- 检查中转层是否有响应改写、裁剪或风控返回

## 4) Team 账号应用异常

**常见原因**

- Team 缺少 Org ID
- API Key 与 Base URL 不匹配
- 本地认证文件写入失败

**排查动作**

1. 重新确认 Team 字段完整性
2. 重新应用账号并观察提示
3. 检查 `~/.codex/auth.json` 是否可写

## 5) 会话搜索慢或无结果

**常见原因**

- 当前关键词无法命中 history 索引，进入深度扫描
- 扫描范围过大（天数、数量过高）

**排查动作**

- 缩小“最近天数”
- 降低“最多扫描条数”
- 尝试更稳定关键词，或切换 AND/OR 模式

## 6) WebView 问题反复出现

**机制说明**

「WebView错误修改」会执行：

- 结束 VS Code 及相关进程
- 清理缓存与存储目录
- 重新启动 VS Code

**建议**

- 修复前保存未提交内容
- 修复后首次启动可能略慢，属缓存重建正常现象

## 7) 日志定位

关键日志文件：`~/.codex/codex_switcher.log`

若需定位复杂问题，建议附带：

- 触发步骤
- 页面提示截图
- 日志时间段对应内容
